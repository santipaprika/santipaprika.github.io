<!DOCTYPE html>
<html>
  <head>
    
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="shortcut icon" href=/static/img/icon3.png />
        <title>Scalable Renderer - Santi Gonzalez</title>
        <meta name="author" content="Santi Gonzalez" />
        <meta name="description" content="Scalable Renderer" />
        <meta name="keywords" content="Scalable Renderer, Santi Gonzalez, " />

        <meta content="" property="fb:app_id">
        <meta content="Santi Gonzalez" property="og:site_name">
        
          <meta content="Scalable Renderer" property="og:title">
        
        
          <meta content="article" property="og:type">
        
        
          <meta content="Graphics programmer" property="og:description">
        
        
          <meta content="/projects/scalable-renderer" property="og:url">
        
        
          <meta content="2021-06-22T14:30:00+02:00" property="article:published_time">
          <meta content="/about/" property="article:author">
        
        
          <meta content="/static/img/logo-high-resolution.png" property="og:image">
        
        
          
        
        
          
        
        <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="@">
        <meta name="twitter:creator" content="@">
        
          <meta name="twitter:title" content="Scalable Renderer">
        
        
          <meta name="twitter:url" content="/projects/scalable-renderer">
        
        
          <meta name="twitter:description" content="Graphics programmer">
        
        

      <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml">
      <script type="text/javascript">window.baseurl = '';</script>
      
        <!-- Custom Fonts -->
        <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css">

        <!-- FontAwesome icons -->
        <link rel="stylesheet" href="https://use.fontawesome.com/74dfc6cf47.css">

        <!-- Core BootStrap CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
        <!-- Material Design CSS -->
        <link rel="stylesheet" href="/static/css/bootstrap-material-design.min.css">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/static/css/syntax.css">

        <!-- Custom CSS -->        
        <link rel="stylesheet" href="/static/css/thickbox.css">
        <link rel="stylesheet" href="/static/css/main.css">
        <link rel="stylesheet" href="/static/css/projects.css">

        <script type="text/javascript">
          //loadingImage is relative to project dir
          var tb_pathToImage = "/static/img/loadingAnimation.gif";
        </script>

      <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-2SGFM1LTK1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-2SGFM1LTK1');
</script>
  </head>

  <body class="home overflow-hidden">
    <div class="header-panel shadow-z-2">
      <div class="container" style="display: table;">
        <div class="row">
          <div class="col-md-4 col-sm-5 col-xs-12" style="vertical-align: middle;">
            <div class="row-picture" style="float: left;" style="vertical-align:middle;">
              <img id="about" src="/static/img/icon3.png" height="75px" width="75px" style="margin-right: 10px; margin-top: 7px;">
            </div>
            <span class="details" style="color: white;">
                <h4 class="list-group-item-heading">Santi Gonzalez</h4>
                <p >Graphics programmer</p>
              <div class="social-icons">
	
        <a class="icon" target="_blank" href="https://github.com/santipaprika"><i class="fa fa-github"></i></a>
    
        <a class="icon" target="_blank" href="https://twitter.com/santipaprika"><i class="fa fa-twitter"></i></a>
    
        <a class="icon" target="_blank" href="https://www.linkedin.com/in/santi-gonzalez-jimenez/"><i class="fa fa-linkedin"></i></a>
    
        <a class="icon" target="_blank" href="mailto:santi.gonzalez.dm@gmail.com"><i class="fa fa-envelope"></i></a>
    
        <a class="icon" target="_blank" href="https://stackoverflow.com/users/14384832/santi-paprika"><i class="fa fa-stack-overflow"></i></a>
    
        <a class="icon" target="_blank" href="/sitemap.xml"><i class="fa fa-feed"></i></a>
    
</div>

<!--FACEBOOK / LINKEDIN -->
<meta property='og:title' content='Santi Gonzalez'/>
<meta property='og:image' content='/static/img/icon3.png'/>
<meta property='og:description' content='Graphics programmer'/>
<meta property='og:url' content='santipaprika.github.io'/>

            </span>
            <div class="navbar-header pull-right">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <i class="fa fa-2x fa-bars"></i>
              </button>
            </div>
          </div>
          <div class="col-md-8 col-sm-7 col-xs-12">
            
          <div class="row"  style="margin-top: -15px;" >
            <h2 class="blog-title-pro col-md-8 col-sm-9 col-xs-12 ">Scalable Renderer</h2>
            
            <div class="col-md-4 col-sm-3 col-xs-12 searchcontrol" id="js-search">
              <input class="form-control" type="text" id="js-search__input" placeholder="Search">
              <ul class="search__results" id="js-search__results"></ul>
            </div>
            
            </div>
            <p class="info">
            
                
                    <span class="time">Jun 2021</span>
                
            
            
            </p>
          </div>
        </div>
      </div>
    </div>

    <div class="container main outer">
      <div class="row">
        <div class="col-md-3 col-xs-12">
              <nav class="menu">
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
    <ul class="list-separator nav navbar-nav well well-primary project">

	
	
	
	
	
	
    
	
	<li class="col-lg-12 col-md-12 col-sm-4 col-xs-12 current-menu-item scalable-renderer"><a href="/" target="_self"><i class="fa fa-desktop"></i> Projects</a></li>

	
	
	
	
	
	
    
	
	<li class="col-lg-12 col-md-12 col-sm-4 col-xs-12  scalable-renderer"><a href="/about/" target="_self"><i class="fa fa-comments"></i> About</a></li>

	
	
	
	
	
	
    
	
	<li class="col-lg-12 col-md-12 col-sm-4 col-xs-12  scalable-renderer"><a href="/posts" target="_self"><i class="fa fa-pen-alt"></i> Blog</a></li>

</ul>

    </div>
    </nav>

        </div>
        <div class="col-md-9 col-xs-12 full">
          <div class="post-content well">
    <article class="content">
    
        
    
        
            <div class="tag-holder">
             
                
                    <span class="label" data-tag="c++">C++</span>
                    
                    <span class="label" data-tag="graphics">Graphics</span>
                    
                    <span class="label" data-tag="rendering">Rendering</span>
                    
                    <span class="label" data-tag="modeling">Modeling</span>
                    
                <span style="display: flex; inline-block">
                <a href="https://github.com/santipaprika/scalable-renderer" target="_blank" class="btn btn-xs btn-default btn-raised">
                    <img src="/static/img/github_button.png" width="70px"/>
                </a>
            </span>
            
            </div>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
    <div class="post"><h1 id="scalable-renderer">Scalable Renderer</h1>
<p><em>Academic SOLO project</em><br />
<br /></p>

<h2 id="description">Description</h2>
<p>Real-time renderer built in C++ with scalability features and optimization algorithms for graphics and game engines. It involves <em>LOD</em> generation, time-critical rendering, and visibility preprocessing, among others.</p>

<p>Final project for the <em>UPC</em> course <em>Scalable Rendering for Graphics and Game Engines</em>.</p>

<h2 id="demo">Demo</h2>
<div style="width:100%;height:0;padding-bottom:54%;position:relative;"><iframe width="100%" height="100%" style="position:absolute" src="https://www.youtube.com/embed/btikFe5sELE" title="Scalable Renderer" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
<p><br /></p>

<h2 id="implemented-features">Implemented features</h2>

<ul>
  <li>
    <p><strong>Compute and display framerate:</strong> Framerate computed using the time
elapsed during the previous <em>F</em> frames. This amount is displayed, as
well as the framerate provided by <em>ImGui</em>.</p>
  </li>
  <li>
    <p><strong>Draw multiple copies of the same object:</strong> Done, even though it is
not useful in the current state of the application. In any case,
this functionality can be <strong>triggered via numerical keys</strong>.</p>
  </li>
  <li>
    <p><strong>Complex museum:</strong> Tile-based museum generated via external
application (<a href="https://www.mapeditor.org/">Tiled</a>). A tile file
parser has been implemented, allowing user-friendly manipulation
directly on the <em>Tiled</em> editor. The current museum has 11 rooms
filled with different content (see Figure 1).</p>

    <figure>
<img src="https://i.ibb.co/ZBZnJVk/Screenshot-from-2021-06-15-19-41-37.png" alt="Tilemap" />
<figcaption aria-hidden="true">Figure 1: Tilemap editor with the current attached museum. Each color represents a different model (see Github page).</figcaption>
</figure>
    <p><br /></p>
  </li>
  <li>
    <p><strong>Museum visualization:</strong> Floor and statue tiles are first filled
with a flattened cube to visualize a floor, and a statue is added
then if needed. When a floor and a non-floor tile threshold is
found, a flattened vertical cube is added in the right tile face to
symbolize a wall.</p>
  </li>
  <li>
    <p><strong>Movement</strong>: FPS-like movement, with <em>ASWD</em> effect being with
respect to the camera, and <em>E</em> (up) <em>Q</em> (down) with respect to
global coordinates.</p>
  </li>
  <li>
    <p><strong>Mesh loading</strong>: To perform this operation, a static (C++ static
key) dictionary structure has been used. When an entity asks for a
mesh to be its representative, then it reads it from disk, but
instead of discarding it afterwards, it saves it on memory so that
all entities using the same mesh can simply have a pointer attribute
pointing to the region where it is contained, without having to read
it again.</p>
  </li>
  <li>
    <p><strong>Compute simplified versions of the loaded model using an octree:</strong>
The octree is built by evaluating each vertex of the model
individually, generating new levels until reaching the maximum
desired one.<br />
The level of detail (<em>LOD</em>) meshes are then reconstructed by
connecting the representative of the octree nodes (using the
average) at the selected level if there are vertices being
represented connected in the detailed version.<br />
<strong><em>LOD</em>s are generated and stored to disk, unless the targeted <em>LOD</em>
already exists, then it is loaded without computing the octree.</strong><br />
Given the current implementation of the octree class, it is not
possible to simplify very complex meshes. For example, <em>lucy.ply</em>
cannot be simplified with <em>QEM</em> using  ≥ 9 as maximum depth without
running into memory issues (for 16 GB RAM systems, which is my
case). Hence, the scene proposes a set of models with <em>LOD</em> levels
6,7,8, and 9 but without including <em>lucy.ply</em>.<br />
The octree implementation could be optimized and also separated in
different types of octrees in terms of the desired representation
and clustering techniques to use.</p>

    <ul>
      <li><strong>Compute vertex representative using QEM:</strong> The total fundamental
error quadric is computed on the fly as new vertices are evaluated.
Afterwards, this is used to obtain the point that minimizes the
error metric as the node’s representative.</li>
    </ul>
  </li>
  <li>
    <p><strong>Preservation of thin features:</strong> In the vertex evaluation phase,
instead of adding to a single cumulative value or quadric, use 8
different clusters. Each of this clusters define a set of directions
within an octant. Each vertex will be classified to the cluster that
contains its normal.<br />
If close enough to the entity, some flipped and distorted triangles
can be observed, which is a drawback of the method, but also there
could be some bug in the implementation enhancing this effect.</p>
  </li>
  <li>
    <p><strong>Representative and clustering techniques can be combined:</strong>
Average representative with voxel clustering (simple approach), QEM
representative with voxel clustering, average representative with
normal-based voxel clustering, and QEM representative with
normal-based voxel clustering.</p>
  </li>
  <li>
    <p><strong>Time-critical rendering:</strong> Since the triangles per second (<em>TPS</em>)
is a GPU-dependant metric, a UI slider is used to let the user chose
an appropriate value. Even though it could be optimized, the current
implementation recomputes the whole value queue from scratch at
every frame (some constant measures are stored in the mesh structure
to avoid repetitive computations).</p>
  </li>
  <li>
    <p><strong>Hysteresis transition:</strong> A <em>blocked</em> flag is assigned to each
entity. When an entity transitions to a different <em>LOD</em> (because of
the time-critical algorithm), it is set as <em>blocked</em> and we store
the distance from the object to the camera. This entity will not be
allowed to change its <em>LOD</em> until the camera has gone closer or
further than a given distance. In the current implementation, this
threshold has been implemented in two different ways (both can be
tuned by the user):</p>

    <ol>
      <li>
        <p><strong>Relative distance</strong>: the threshold is proportional to the
distance from the entity to the camera at the moment of
blocking.</p>
      </li>
      <li>
        <p><strong>Absolute distance</strong>: the threshold is fixed.</p>
      </li>
    </ol>
  </li>
  <li>
    <p><strong>Precompute cell-to-cell visibility:</strong> The precomputation is done
in grid space using ray casting for each cell in random directions.</p>
  </li>
  <li>
    <p><strong>Visibility precomputation optimization:</strong></p>

    <ol>
      <li><strong>Random offset for cell center sampling:</strong> A technique that has
provided good accuracy with a reduced number of rays is to use
as cell center a randomized position within the cell bounds.
Since this point defines where the ray will pass through, this
allows further cell visibility exploration rather than
visibility from the fixed cell center.</li>
    </ol>
  </li>
</ul>
</div>
    <hr />
    <div class="share-page">
    Share this on &rarr;
 <a href="https://twitter.com/share" class="twitter-share-button" data-via="">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Google + -->
<!-- <span class="g-plus" data-action="share" data-annotation="bubble"></span>
<script src="https://apis.google.com/js/platform.js" async defer></script> -->

<!-- Facebook -->
<span class="fb-share-button" data-href="/projects/scalable-renderer" data-layout="button_count" style="position: relative; top: -6px; left: 3px;"></span>
<span id="fb-root"></span>
<script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.6&appId=";
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<span class="a2a_kit a2a_default_style" style="display: inline-block;"><a class="a2a_button_linkedin_share"></a></span>

<script async src="https://static.addtoany.com/menu/page.js"></script>
</div>

</article>
<hr />


    
    
        
    

    
    
        
    



<div class="PageNavigation">
  
    <a class="prev pull-left" href="/projects/procedural-building-generator">&laquo; Procedural Building Generator</a>
  
  
</div>


<div class="disqus-comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* <![CDATA[ */

        var disqus_shortname = "santi-gonzalez";
        var disqus_identifier = "_Scalable Renderer";
        var disqus_title = "Scalable Renderer";

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    /* ]]> */
    </script>
</div>
</div>
          <div class="row">
            <div class="col-md-12 col-xs-12 footer">
              <footer>
  © 2021 Santi Gonzalez Jimenez - Powered by <a href="https://jekyllrb.com/">Jekyll</a>.
</footer>
<div align="center">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <ins class="adsbygoogle"
    style="display:block"
    data-ad-client="ca-pub-0000000000000000"
    data-ad-slot="0000000000"
    data-ad-format="auto"></ins>
  <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
</div>

            </div>
          </div>
        </div> <!-- end /.col-md-9 -->
      </div> <!-- end /.row -->
    </div>

    
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="https://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script src="https://kit.fontawesome.com/c626897f94.js" crossorigin="anonymous"></script>

<script src="/static/js/super-search.js"></script>

<script src="/static/js/thickbox-compressed.js"></script>
<script src="/static/js/material.min.js"></script>
<script src="/static/js/main.js"></script>
<script src="/static/js/projects.js"></script>

  </body>
</html>
